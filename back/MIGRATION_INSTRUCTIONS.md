# תיקון שגיאת Schema - soldier_status

## הבעיה

המערכת מציגה שגיאה:
```
sqlite3.OperationalError: no such column: soldier_status.start_date
```

הסיבה: המודל `SoldierStatus` עודכן להכיל את העמודות `start_date` ו-`end_date`, אך מסד הנתונים לא עודכן בהתאם.

## הפתרון

יש להריץ את סקריפט העדכון כדי להוסיף את העמודות החסרות:

### Windows (PowerShell או CMD)

```bash
cd back
python update_db.py
```

### Linux/Mac

```bash
cd back
python3 update_db.py
```

## מה הסקריפט עושה?

הסקריפט `update_db.py` עודכן לבצע את הפעולות הבאות:

1. יוצר טבלאות חדשות שלא קיימות (כמו קודם)
2. **חדש**: מוסיף עמודות חסרות לטבלאות קיימות
   - מוסיף `start_date` לטבלת `soldier_status`
   - מוסיף `end_date` לטבלת `soldier_status`

הסקריפט בודק אם העמודות כבר קיימות ורק מוסיף אותן אם הן חסרות, כך שניתן להריץ אותו שוב ושוב בצורה בטוחה.

## אחרי הרצת הסקריפט

אחרי הרצת הסקריפט בהצלחה:

1. הפעל מחדש את השרת
2. השגיאה אמורה להיעלם
3. המערכת תוכל לעבוד עם תאריכי התחלה וסיום של סטטוס חיילים

## סקריפט נוסף (אופציונלי)

במידה ותרצה להריץ רק את המיגרציה של העמודות, ללא יצירת טבלאות חדשות:

```bash
python migrate_soldier_status.py
```

## בעיות אפשריות

- **הקובץ `shavzak.db` לא נמצא**: ודא שאתה בתיקיית `back` והקובץ נמצא שם
- **אין הרשאות כתיבה**: הרץ את הטרמינל כמנהל (Administrator)
- **הדאטהבייס נעול**: סגור את השרת לפני הרצת הסקריפט
