import{c as g,u,r as i,b as l,Q as r,j as e,i as f,S as o,X as y}from"./index-kMap4_bO.js";import{C as N}from"./clock-D8LmE10u.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=g("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),C=()=>{const{user:v}=u(),[d,x]=i.useState([]),[m,h]=i.useState(!0);i.useEffect(()=>{n()},[]);const n=async()=>{try{const s=await l.get("/join-requests");x(s.data.requests||[])}catch(s){console.error("Error loading join requests:",s),r.error("שגיאה בטעינת בקשות הצטרפות")}finally{h(!1)}},j=async s=>{var a,t;if(window.confirm("האם אתה בטוח שברצונך לאשר בקשה זו?"))try{const c=await l.post(`/join-requests/${s}/approve`);r.success("הבקשה אושרה בהצלחה! פלוגה חדשה נוצרה."),n()}catch(c){r.error(((t=(a=c.response)==null?void 0:a.data)==null?void 0:t.error)||"שגיאה באישור הבקשה")}},p=async s=>{var a,t;if(window.confirm("האם אתה בטוח שברצונך לדחות בקשה זו?"))try{await l.post(`/join-requests/${s}/reject`),r.success("הבקשה נדחתה"),n()}catch(c){r.error(((t=(a=c.response)==null?void 0:a.data)==null?void 0:t.error)||"שגיאה בדחיית הבקשה")}};return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"spinner"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"בקשות הצטרפות"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ניהול בקשות הצטרפות למפקדי פלוגות חדשים"})]}),d.length===0?e.jsxs("div",{className:"card text-center py-12",children:[e.jsx(N,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"אין בקשות ממתינות"}),e.jsx("p",{className:"text-gray-500",children:"כל הבקשות עובדו, אין בקשות המתנה כרגע"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(s=>e.jsxs("div",{className:"card hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-military-100 p-3 rounded-lg",children:e.jsx(f,{className:"w-8 h-8 text-military-600"})}),e.jsx("span",{className:"badge badge-yellow",children:"ממתין"})]}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:s.full_name}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(o,{size:16}),e.jsxs("span",{className:"text-sm",children:["פלוגה: ",s.pluga_name]})]}),s.gdud&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(o,{size:16}),e.jsxs("span",{className:"text-sm",children:["גדוד: ",s.gdud]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["משתמש: ",s.username]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["נשלח:"," ",new Date(s.created_at).toLocaleDateString("he-IL")]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs("button",{onClick:()=>j(s.id),className:"flex-1 btn-primary flex items-center justify-center gap-2",title:"אשר בקשה",children:[e.jsx(b,{size:18}),e.jsx("span",{children:"אשר"})]}),e.jsxs("button",{onClick:()=>p(s.id),className:"flex-1 btn-secondary flex items-center justify-center gap-2",title:"דחה בקשה",children:[e.jsx(y,{size:18}),e.jsx("span",{children:"דחה"})]})]})]},s.id))})]})};export{C as default};
