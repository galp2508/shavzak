import{c as w,u as z,r as n,j as e,X as S,d as h,S as b}from"./index-kMap4_bO.js";import{A as P}from"./award-ByqoaFCX.js";import{S as k}from"./save-CzFpPGv-.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=w("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=w("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),D=()=>{var y,f;const{user:s,updateProfile:N}=z(),[r,d]=n.useState(!1),[p,u]=n.useState(!1),[m,t]=n.useState({type:"",text:""}),[a,x]=n.useState({username:"",full_name:"",password:"",confirmPassword:""});n.useEffect(()=>{s&&x(l=>({...l,username:s.username||"",full_name:s.full_name||""}))},[s]);const o=l=>{const{name:i,value:c}=l.target;x(g=>({...g,[i]:c}))},v=async l=>{if(l.preventDefault(),t({type:"",text:""}),a.password&&a.password!==a.confirmPassword){t({type:"error",text:"הסיסמאות אינן תואמות"});return}u(!0);try{const i={username:a.username,full_name:a.full_name};a.password&&(i.password=a.password);const c=await N(i);c.success?(t({type:"success",text:"הפרופיל עודכן בהצלחה"}),d(!1),x(g=>({...g,password:"",confirmPassword:""}))):t({type:"error",text:c.error||"שגיאה בעדכון הפרופיל"})}catch{t({type:"error",text:"שגיאה לא צפויה"})}finally{u(!1)}};return e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"הפרופיל שלי"}),r?e.jsxs("button",{onClick:()=>d(!1),className:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition",children:[e.jsx(S,{size:20}),e.jsx("span",{children:"ביטול עריכה"})]}):e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-military-600 text-white rounded-lg hover:bg-military-700 transition",children:[e.jsx(C,{size:20}),e.jsx("span",{children:"עריכת פרטים"})]})]}),m.text&&e.jsx("div",{className:`p-4 rounded-lg flex items-center gap-2 ${m.type==="error"?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:m.text}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[e.jsx("div",{className:"bg-military-100 p-4 rounded-full",children:e.jsx(h,{className:"w-12 h-12 text-military-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s==null?void 0:s.full_name}),e.jsxs("p",{className:"text-gray-600",children:[s==null?void 0:s.role," - ",(y=s==null?void 0:s.pluga)==null?void 0:y.name]})]})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(h,{size:16}),"שם משתמש"]}),e.jsx("input",{type:"text",name:"username",value:a.username,onChange:o,disabled:!r,className:`w-full p-2.5 rounded-lg border ${r?"border-gray-300 focus:ring-2 focus:ring-military-500":"bg-gray-50 border-gray-200"}`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(P,{size:16}),"שם מלא"]}),e.jsx("input",{type:"text",name:"full_name",value:a.full_name,onChange:o,disabled:!r,className:`w-full p-2.5 rounded-lg border ${r?"border-gray-300 focus:ring-2 focus:ring-military-500":"bg-gray-50 border-gray-200"}`})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(j,{size:16}),"סיסמה חדשה (אופציונלי)"]}),e.jsx("input",{type:"password",name:"password",value:a.password,onChange:o,placeholder:"השאר רוק אם אין שינוי",className:"w-full p-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-military-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(j,{size:16}),"אימות סיסמה חדשה"]}),e.jsx("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:o,placeholder:"חזור על הסיסמה החדשה",className:"w-full p-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-military-500"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(b,{size:16}),"תפקיד"]}),e.jsx("input",{type:"text",value:(s==null?void 0:s.role)||"",disabled:!0,className:"w-full p-2.5 rounded-lg border border-gray-200 bg-gray-50 text-gray-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(b,{size:16}),"פלוגה"]}),e.jsx("input",{type:"text",value:((f=s==null?void 0:s.pluga)==null?void 0:f.name)||"",disabled:!0,className:"w-full p-2.5 rounded-lg border border-gray-200 bg-gray-50 text-gray-500"})]})]}),r&&e.jsxs("div",{className:"flex gap-4 pt-4 border-t border-gray-100",children:[e.jsxs("button",{type:"submit",disabled:p,className:"flex items-center gap-2 px-6 py-2.5 bg-military-600 text-white rounded-lg hover:bg-military-700 transition disabled:opacity-50",children:[e.jsx(k,{size:20}),p?"שומר...":"שמור שינויים"]}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-2.5 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition",children:"ביטול"})]})]})]})})]})};export{D as default};
